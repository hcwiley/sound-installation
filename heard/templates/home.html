{% extends base_template %}
{% block google_map %}
<div id="map_canvas" style="width:100%; height:100%">
</div>
<script type='text/javascript'>
    initialize(39.791, -86.1480, false);
</script>
{% endblock %}
{% block container %}
<div id='header'>
	<div class='filler'>
	</div>
	<h1>brian james priest</h1>
</div>
<div id='logo' class='rounded-corners-all'>
	<img src='{{ STATIC_URL }}/images/logo.jpg' />
</div>
<div id='welcome-popup'>
	<div class='filler'>
	</div>
	<h5 id='close-welcome' title='click to close'>(X)</h5>
	<p>
        Ut nulla. Vivamus bibendum, nulla ut congue fringilla, lorem ipsum ultricies risus, ut rutrum velit tortor vel purus. In hac habitasse platea dictumst. Duis fermentum, metus sed congue gravida, arcu dui ornare urna, ut imperdiet enim odio dignissim ipsum. Nulla facilisi. Cras magna ante, bibendum sit amet, porta vitae, laoreet ut, justo. Nam tortor sapien, pulvinar nec, malesuada in, ultrices in, tortor. Cras ultricies placerat eros. Quisque odio eros, feugiat non, iaculis nec, lobortis sed, arcu. Pellentesque sit amet sem et purus pretium consectetuer.
    </p>
</div>	
<div id='all-sounds'>
    {% for a in artists %}
    {% for s in a.piece_set.all %}
        <script type='text/javascript'>
			var ll = new google.maps.LatLng({{ s.location.lat }}, {{ s.location.long }});
			/*icon = new google.maps.MarkerImage('{{ s.default_image.thumb }}', new google.maps.Size(50,50));
			if( icon.url !== ''){
            sound = new google.maps.Marker({
                position: ll,
                map: map,
				icon: icon,
                draggable: false,
            });
			}
			else{
			*/
			sound = new google.maps.Marker({
                position: ll,
                map: map,
                draggable: false,
            });
			//}
			google.maps.event.addListener(sound, 'click', function(){
				$(document).click(function(event){
					console.log('{{ s.pk }}');
					$('.marker-feed-back').css('z-index','-1');
					$('#{{ s.pk }}').css('z-index','10');
					jingleAnimate('#{{ s.pk }}', event.pageX, event.pageY);
					$(document).unbind('click');
				});
			});
        </script>
		<div id='{{ s.pk }}' class='marker-feed-back rounded-corners-all'>
        <p>
            {{ a.name }}
        </p>
        <p>
            <a href='{{ s.slug }}'>{{ s.title }}</a>
        </p>
    </div>
    {% endfor %}
    {% endfor %}
</div>
{% endblock %}
{% block edit_street %}
<script type='text/javascript'>
	jQuery.event.add(window, 'load', function(){
		var as = $('.marker-feed-back a');
		for (var i = 0; i < $(as).length; i++){
			$(as[i]).attr('href', '/edit/'+$(as[i]).attr('href'));
		}
	});

</script>
{% endblock %}
